<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background-color: #0c0c0c;
            margin: 0;
            font-family: "Pretendard", sans-serif;
        }

        .product_grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .card {
            /* background: #ddd; */
            perspective: 1000px;
            height: 300px;
            /* aspect-ratio: 3 / 4; */
            /* üî∏ÏÑ∏Î°ú ÎπÑÏú® Í≥†Ï†ï (ÌïÑÏöîÏãú 1/1Î°ú Î≥ÄÍ≤Ω Í∞ÄÎä•) */
        }

        .card3 {
            grid-row: span 2;
            height: 100%;
            /* üî∏ ÏÑ∏ Î≤àÏß∏, ÎÑ§ Î≤àÏß∏ ÏÖÄÎßå ÏÑ∏Î°úÎ°ú 2Ïπ∏ */
        }

        .card5 {
            grid-row: span 2;
            height: 100%
        }

        .inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s ease;
            cursor: pointer;
        }

        .card.flipped .inner {
            transform: rotateY(180deg);
        }

        .front,
        .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            overflow: hidden;

        }

        .front {
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            /* ‚úÖ Ïù¥ÎØ∏ÏßÄ ÎπÑÏú® Ïú†ÏßÄÌïòÎ©¥ÏÑú ÍΩâ Ï±ÑÏö∞Í∏∞ */
        }

        .back {
            background-color: #a06d1c;
            color: #222;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            font-weight: 500;
        }

        small {
            display: none;
        }

        .card:hover small {
            font-size: 0.85rem;
            color: #666;
            display: inline;
        }
    </style>
</head>

<body>
    <div class="product_grid influencer">
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card3">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card5">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>
        <article class="card card1">
            <div class="inner">
                <div class="front">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
                <div class="back">
                    <img src="img1.jpg" alt="Ï†úÌíà1">
                    <p>Glow Serum<br><small>Beauty of Joseon</small></p>
                </div>
            </div>
        </article>

    </div>

    <script>
        /* -------------------------------
              üü£ 2. Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Ïπ¥Îìú ÏàúÏ∞® ÌöåÏ†Ñ
          ------------------------------- */
        const cards = Array.from(document.querySelectorAll('.influencer .card'));
        if (cards.length) {
            const config = {
                flipMs: 800,
                stayMs: 500,
                gapMs: 120,
                resetDelay: 1000,
            };

            let loopRunning = false;
            let stopLoop = false;
            let isHovered = false;

            const influencerEl = document.querySelector('.influencer');
            if (influencerEl) {
                influencerEl.addEventListener('pointerenter', () => (isHovered = true));
                influencerEl.addEventListener('pointerleave', () => (isHovered = false));
            }

            const sleep = (ms) => new Promise((res) => setTimeout(res, ms));

            async function sequentialFlipLoop() {
                if (loopRunning) return;
                loopRunning = true;

                while (!stopLoop) {
                    for (const card of cards) {
                        if (stopLoop) break;
                        while (isHovered && !stopLoop) await sleep(150);
                        if (stopLoop) break;

                        card.classList.add('flipped');
                        await sleep(config.flipMs + config.stayMs + config.gapMs);
                    }
                    if (stopLoop) break;

                    await sleep(config.resetDelay);
                    cards.forEach((c) => c.classList.remove('flipped'));
                    await sleep(config.flipMs + 300);
                }

                loopRunning = false;
            }

            document.addEventListener('visibilitychange', () => {
                if (document.hidden) stopLoop = true;
                else if (stopLoop) {
                    stopLoop = false;
                    sequentialFlipLoop();
                }
            });

            sequentialFlipLoop();
        }

    </script>

</body>

</html>